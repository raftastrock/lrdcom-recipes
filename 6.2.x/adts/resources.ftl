<svg xmlns="http://www.w3.org/2000/svg" role="icon" style="display: none;">
	<symbol viewBox="0 0 64 64" id="businessWPIcon">
		<title>Business Whitepaper Icon</title>
		<path fill="#1C75B9" d="M19 17.3h12v1.5H19zM54 18.8H39.3V4h1.5v13.3H54"/>
		<path fill="#1C75B9" d="M54.8 60.8H9.3V3.3h31.1l14.4 14.4v43.1zm-44-1.5h42.5v-41L39.7 4.8H10.8v54.5z"/>
		<path fill="#1C75B9" d="M42 49.8H22c-1.5 0-2.8-1.2-2.8-2.8V35c0-1.5 1.2-2.8 2.8-2.8h20c1.5 0 2.8 1.2 2.8 2.8v12c0 1.5-1.3 2.8-2.8 2.8zm-20-16c-.7 0-1.3.6-1.3 1.3v12c0 .7.6 1.3 1.3 1.3h20c.7 0 1.3-.6 1.3-1.3V35c0-.7-.6-1.3-1.3-1.3H22zM36.8 32h-1.5v-2c0-.1-.1-.3-.3-.3h-6c-.1 0-.3.1-.3.3v2h-1.5v-2c0-1 .8-1.8 1.8-1.8h6c1 0 1.8.8 1.8 1.8v2z"/>
		<path fill="#1C75B9" d="M38.3 33h1.5v3h-1.5zM24.3 33h1.5v3h-1.5z"/>
	</symbol>
	<symbol viewBox="0 0 64 64" id="caseStudyIcon">
		<title>Case Study Icon</title>
		<path fill="#1C75B9" d="M19 17.3h12v1.5H19zM54 18.8H39.2V4h1.5v13.3H54"/>
		<path fill="#1C75B9" d="M54.7 60.8H9.3V3.3h31.1l14.4 14.4v43.1zm-43.9-1.5h42.5v-41L39.7 4.8H10.8v54.5z"/>
		<path fill="#1C75B9" d="M18.3 42.8V28.3h14.6L18.3 42.8zm1.5-13v9.4l9.4-9.4h-9.4zM33.3 42.8V28.3h14.6L33.3 42.8zm1.5-13v9.4l9.4-9.4h-9.4z"/>
	</symbol>
	<symbol viewBox="0 0 64 64" id="ebooksIcon">
		<title>Ebooks Icon</title>
		<path fill="#1C75B9" d="M19 38.3h26v1.5H19zM19 30.3h26v1.5H19zM19 42.3h26v1.5H19zM19 34.3h26v1.5H19zM19 26.3h26v1.5H19zM25 22.3h20v1.5H25zM25 18.3h20v1.5H25z"/>
		<path fill="#1C75B9" d="M54.8 60.8H9.3V3.3h45.5v57.5zm-44-1.5h42.5V4.8H10.8v54.5z"/>
		<path fill="#1C75B9" d="M48.8 15.2L44 12.8l-4.7 2.4V4h1.5v8.8l3.2-1.6 3.3 1.6V4h1.5M44.8 52.8h-7.5v-4.5h7.5v4.5zm-6-1.5h4.5v-1.5h-4.5v1.5zM26.8 52.8h-7.5v-4.5h7.5v4.5zm-6-1.5h4.5v-1.5h-4.5v1.5zM33.8 52.8h-3.5v-4.5h3.5v4.5zm-2-1.5h.5v-1.5h-.5v1.5zM23 23.8h-3.7V18h1.5v4.3H23"/>
	</symbol>
	<symbol viewBox="0 0 64 64" id="migrationGuideIcon">
		<title>Migration Guide Icon</title>
		<path fill="#1C75B9" d="M39.3 47.8v-4H20v-1.5h20.8v1.9l4.1-4.2-4.1-4.2v2h-14v4L18.9 34l7.9-7.8v4.1H46v1.5H25.3v-2L21.1 34l4.2 4.2v-1.9h14v-4.1l7.8 7.8M20 17.3h12v1.5H20zM55 18.8H40.3V4h1.5v13.3H55"/>
		<path fill="#1C75B9" d="M55.8 60.8H10.3V3.3h31.1l14.4 14.4v43.1zm-44-1.5h42.5v-41L40.7 4.8H11.8v54.5z"/>
	</symbol>
	<symbol viewBox="0 0 64 64" id="technicalWPIcon">
		<title>Technical Whitepaper Icon</title>
		<path fill="#1C75B9" d="M19 17.3h12v1.5H19zM19 47.3h26v1.5H19zM54 18.8H39.3V4h1.5v13.3H54"/>
		<path fill="#1C75B9" d="M54.8 60.8H9.3V3.3h31.1l14.4 14.4v43.1zm-44-1.5h42.5v-41L39.7 4.8H10.8v54.5z"/>
		<path fill="#1C75B9" d="M25.6 40.6l-7.7-7.7 7.7-7.7 1.1 1.1-6.6 6.6 6.6 6.7M38.4 40.6l-1.1-1 6.6-6.7-6.6-6.6 1.1-1.1 7.7 7.7M33.51 24.293l1.448.388-4.56 17-1.447-.387z"/>
	</symbol>
	<symbol viewBox="0 0 64 64" id="videoCaseStudyIcon">
		<title>Video Case Study Icon</title>
		<path fill="none" d="M35 30.8v9.4l9.4-9.4M20 30.8v9.4l9.4-9.4"/>
		<path fill="none" d="M36 12.6c0-2.6.9-5 2.4-6.8H11v54.5h42.5V21.2c-1.8 1.4-4.1 2.2-6.6 2.2-6 0-10.9-4.9-10.9-10.8zm-16.8 5.7h12v1.5h-12v-1.5zm-.7 25.5V29.3H33L18.5 43.8zm15 0V29.3H48L33.5 43.8z"/>
		<path fill="#1C75B9" d="M19.2 18.3h12v1.5h-12z"/>
		<path fill="#1C75B9" d="M53.5 21.2v39.1H11V5.8h27.5c.4-.5.9-1 1.5-1.5H9.5v57.5H55v-42c-.5.5-1 1-1.5 1.4z"/>
		<path fill="#1C75B9" d="M18.5 43.8L33 29.3H18.5v14.5zm1.5-13h9.4L20 40.2v-9.4zM33.5 43.8L48 29.3H33.5v14.5zm1.5-13h9.4L35 40.2v-9.4z"/>
		<path fill="transparent" d="M46.9 3.2c-5.2 0-9.4 4.2-9.4 9.3s4.2 9.3 9.4 9.3 9.4-4.2 9.4-9.3-4.3-9.3-9.4-9.3zm-3.6 15.4V6.5l10.5 6.1-10.5 6z"/>
		<path fill="transparent" d="M44.8 9.1V16l6-3.4"/>
		<path fill="#F5A11D" d="M38.4 5.8C36.9 7.6 36 10 36 12.6c0 6 4.9 10.8 10.9 10.8 2.5 0 4.8-.8 6.6-2.2.5-.4 1-.9 1.5-1.4 1.7-1.9 2.8-4.4 2.8-7.2 0-6-4.9-10.8-10.9-10.8-2.6 0-5.1.9-7 2.5-.5.4-1 .9-1.5 1.5zm8.5 16.1c-5.2 0-9.4-4.2-9.4-9.3s4.2-9.3 9.4-9.3 9.4 4.2 9.4 9.3-4.3 9.3-9.4 9.3z"/>
		<path fill="#F5A11D" d="M43.3 18.6l10.5-6.1-10.5-6v12.1zm1.5-2.6V9.1l6 3.5-6 3.4z"/>
	</symbol>
	<symbol viewBox="0 0 64 64" id="webinarIcon">
		<title>Webinar Icon</title>
		<path fill="#1C75B9" d="M62.8 44.8H1.3V5.3h61.5v39.5zm-60-1.5h58.5V6.8H2.8v36.5z"/>
		<path fill="#1C75B9" d="M25.3 44h1.5v14h-1.5zM37.3 44h1.5v14h-1.5z"/>
		<path fill="#1C75B9" d="M4 57.3h56v1.5H4zM32 37.8c-7 0-12.8-5.7-12.8-12.8S25 12.3 32 12.3 44.8 18 44.8 25 39 37.8 32 37.8zm0-24c-6.2 0-11.3 5-11.3 11.3s5 11.3 11.3 11.3 11.3-5 11.3-11.3S38.2 13.8 32 13.8z"/>
		<path fill="#1C75B9" d="M27.8 32V18l12.1 7-12.1 7zm1.5-11.4v8.7l7.6-4.4-7.6-4.3z"/>
	</symbol>
</svg>

<#assign liferay_ui = taglibLiferayHash["/WEB-INF/tld/liferay-ui.tld"] />

<#assign asset_category_local_service_util = objectUtil("com.liferay.portlet.asset.service.AssetCategoryLocalServiceUtil") />
<#assign dl_file_entry_local_service_util = staticUtil["com.liferay.portlet.documentlibrary.service.DLFileEntryLocalServiceUtil"] />
<#assign journal_article_local_service_util = staticUtil["com.liferay.portlet.journal.service.JournalArticleLocalServiceUtil"] />

<#assign svg_sprite = dl_file_entry_local_service_util.getFileEntry(2420757) />

<div class="block-container justify-center" id="resourcesDisplay">
	<#list entries as entry>
		<#assign asset_renderer = entry.getAssetRenderer() />

		<#assign category_names = asset_category_local_service_util.getCategoryNames(entry.getClassNameId(), entry.getClassPK()) />

		<#assign article_description = "" />
		<#assign featured_case_study = false />

		<#if asset_renderer.getClassName() == "com.liferay.portlet.documentlibrary.model.DLFileEntry">
			<#if category_names?seq_contains("Business Whitepapers")>
				<#assign svg_id = "#businessWPIcon" />
			<#elseif category_names?seq_contains("ebooks")>
				<#assign svg_id = "#ebooksIcon" />
			<#elseif category_names?seq_contains("Migration Guides")>
				<#assign svg_id = "#migrationGuideIcon" />
			<#elseif category_names?seq_contains("Technical Whitepapers")>
				<#assign svg_id = "#technicalWPIcon" />
			<#elseif category_names?seq_contains("Webinars")>
				<#assign svg_id = "#webinarIcon" />
			</#if>

			<#assign dl_file_entry = dl_file_entry_local_service_util.fetchDLFileEntryByUuidAndGroupId(asset_renderer.getUuid(), asset_renderer.getGroupId()) />

			<#assign fieldsMap = dl_file_entry.getFieldsMap(dl_file_entry.getFileVersion().getFileVersionId()) />

			<#list fieldsMap.values() as field>
				<#assign dl_title = dl_file_entry.getTitle() />
				<#assign dl_display_title = field.get("display_title")! />

				<#if dl_display_title?has_content && dl_display_title.getValue()?has_content>
					<#assign dl_title = dl_display_title.getValue() />
				</#if>
			</#list>

			<#assign resource_id = dl_file_entry.getFileEntryId() />

			<#assign view_url = "/resource?folderId=" + dl_file_entry.getFolderId() + "&title=" + stringUtil.replace(httpUtil.encodeURL(dl_file_entry.getTitle()), " ", "+") />
			<#-- <#assign view_url = "/resource/" + dl_file_entry.getFolderId() + "/" + stringUtil.replace(dl_file_entry.getTitle(), " ", "+") /> -->
		<#elseif asset_renderer.getClassName() == "com.liferay.portlet.journal.model.JournalArticle">
			<#assign article = journal_article_local_service_util.getLatestArticle(entry.getClassPK()) />

			<#assign article_description = article.getDescription(locale)! />

			<#assign document = saxReaderUtil.read(article.getContent()) />

			<#assign structure_field_video_id = document.selectSingleNode("//dynamic-element[@name='video_id']/dynamic-content")! />
			<#assign structure_field_featured = document.selectSingleNode("//dynamic-element[@name='featured']/dynamic-content")! />

			<#if category_names?seq_contains("Case Studies")>
				<#assign svg_id = "#caseStudyIcon" />
			</#if>

			<#if structure_field_video_id.data?has_content>
				<#assign svg_id = "#videoCaseStudyIcon" />
			</#if>

			<#if structure_field_featured.data?has_content>
				<#assign featured_case_study = true />
			</#if>

			<#if featured_case_study>
				<#assign case_study_logo = document.selectSingleNode("//dynamic-element[@name='logo']/dynamic-content").getText()! />
			</#if>

			<#assign view_url = "/resource?title=" + article.getUrlTitle() />
			<#-- <#assign view_url = "/resource/case-studies/" + article.getUrlTitle() /> -->
		</#if>

		<#if view_url??>
			<div class="asset-entry block resource small-padding">
				<a class="element-border font-color no-padding text-center w100" href="${view_url}">
					<#assign asset_title = asset_renderer.getTitle(locale) />
					<#assign css_class = "" />

					<#if article_description?has_content>
						<#assign character_limit = 128 />

						<#if !featured_case_study>
							<#assign title_word_count = asset_title?length />
							<#assign character_limit = character_limit - title_word_count />
							<#assign css_class = "adjusted" />
						</#if>

						<#assign resource_info = stringUtil.shorten(article_description, character_limit, "...") />
					<#else>
						<#assign resource_info = "" />
					</#if>

					<div class="${css_class} resource-wrapper">
						<#if featured_case_study && case_study_logo?has_content>
							<img src="${case_study_logo}" />
						<#else>
							<svg><use xlink:href=${svg_id}></use></svg>
						</#if>

						<#if !featured_case_study>
							<h4 class="asset-entry-title">
								<#if dl_title??>
									${htmlUtil.escape(dl_title)}
								<#else>
									${htmlUtil.escape(asset_title)}
								</#if>
							</h4>
						</#if>

						<#if resource_info?has_content>
							<p>${htmlUtil.escape(resource_info)}</p>
						</#if>
					</div>
				</a>
			</div>
		</#if>
	</#list>
</div>

<style>
	#wrapper .asset-entry.resource a:hover {
		border-color: #1C75B9;
	}

	.asset-entry.resource a {
		border-radius: 3px;
		border: 1px solid;
		display: block;
		height: 0;
		padding-bottom: 100%;
		text-decoration: none;
	}

	.osb-www-asset-publisher-portlet .header {
		padding-left: 1.5em;
		padding-right: 1.5em;
	}

	.resource {
		flex-basis: 288px;
		flex-grow: 1;
		max-width: 25%;
	}

	.resource-wrapper {
		padding: 3.5em 1.5em 0;
	}

	.resource-wrapper img, .resource-wrapper svg {
		padding-bottom: 2em;
	}

	.resource-wrapper.adjusted img, .resource-wrapper.adjusted svg {
		padding-bottom: 0.75em;
	}

	.resource-wrapper svg {
		height: 64px;
		width: 64px;
	}

	@media all and (max-width: 1184px) {
		.resource {
			max-width: 33%;
		}
	}

	@media all and (max-width: 896px) {
		.resource {
			max-width: 50%;
		}
	}

	@media all and (max-width: 608px) {
		.resource {
			max-width: 100%;
		}
	}

	.ie11 .resource-wrapper img {
		height: 64px;
		width: 226px;
	}
</style>