/*
Copyright (c) 2010, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http://developer.yahoo.com/yui/license.html
version: 3.4.0
build: nightly
*/
YUI.add("transition",function(b){var i="",h="",f=b.config.doc,r="documentElement",s="transition",k="Transition",m,j,p,a,n,c,l,t,q={},g=["Webkit","Moz"],e={Webkit:"webkitTransitionEnd"},d=function(){this.init.apply(this,arguments);};d._toCamel=function(u){u=u.replace(/-([a-z])/gi,function(w,v){return v.toUpperCase();});return u;};d._toHyphen=function(u){u=u.replace(/([A-Z]?)([a-z]+)([A-Z]?)/g,function(y,x,w,v){var z=((x)?"-"+x.toLowerCase():"")+w;if(v){z+="-"+v.toLowerCase();}return z;});return u;};d.SHOW_TRANSITION="fadeIn";d.HIDE_TRANSITION="fadeOut";d.useNative=false;b.Array.each(g,function(v){var u=v+k;if(u in f[r].style){i=v;h=d._toHyphen(v)+"-";d.useNative=true;d.supported=true;d._VENDOR_PREFIX=v;}});k=i+k;m=i+"TransitionProperty";j=h+"transition-property";p=h+"transition-duration";a=h+"transition-timing-function";n=h+"transition-delay";c="transitionend";l="on"+i.toLowerCase()+"transitionend";c=e[i]||c;t=i+"Transform";d.fx={};d.toggles={};d._hasEnd={};d._reKeywords=/^(?:node|duration|iterations|easing|delay|on|onstart|onend)$/i;b.Node.DOM_EVENTS[c]=1;d.NAME="transition";d.DEFAULT_EASING="ease";d.DEFAULT_DURATION=0.5;d.DEFAULT_DELAY=0;d._nodeAttrs={};d.prototype={constructor:d,init:function(v,u){var w=this;w._node=v;if(!w._running&&u){w._config=u;v._transition=w;w._duration=("duration" in u)?u.duration:w.constructor.DEFAULT_DURATION;w._delay=("delay" in u)?u.delay:w.constructor.DEFAULT_DELAY;w._easing=u.easing||w.constructor.DEFAULT_EASING;w._count=0;w._running=false;}return w;},addProperty:function(v,x){var A=this,y=this._node,C=b.stamp(y),B=b.one(y),F=d._nodeAttrs[C],z,E,u,D,w;if(!F){F=d._nodeAttrs[C]={};}D=F[v];if(x&&x.value!==undefined){w=x.value;}else{if(x!==undefined){w=x;x=q;}}if(typeof w==="function"){w=w.call(B,B);}if(D&&D.transition){if(D.transition!==A){D.transition._count--;}}A._count++;u=((typeof x.duration!="undefined")?x.duration:A._duration)||0.0001;F[v]={value:w,duration:u,delay:(typeof x.delay!="undefined")?x.delay:A._delay,easing:x.easing||A._easing,transition:A};z=b.DOM.getComputedStyle(y,v);E=(typeof w==="string")?z:parseFloat(z);if(d.useNative&&E===w){setTimeout(function(){A._onNativeEnd.call(y,{propertyName:v,elapsedTime:u});},u*1000);}},removeProperty:function(w){var v=this,u=d._nodeAttrs[b.stamp(v._node)];if(u&&u[w]){delete u[w];v._count--;}},initAttrs:function(v){var u,w=this._node;if(v.transform&&!v[t]){v[t]=v.transform;delete v.transform;}for(u in v){if(v.hasOwnProperty(u)&&!d._reKeywords.test(u)){this.addProperty(u,v[u]);if(w.style[u]===""){b.DOM.setStyle(w,u,b.DOM.getComputedStyle(w,u));}}}},run:function(y){var x=this,v=x._node,u=x._config,w={type:"transition:start",config:u};if(!x._running){x._running=true;if(u.on&&u.on.start){u.on.start.call(b.one(v),w);}x.initAttrs(x._config);x._callback=y;x._start();}return x;},_start:function(){this._runNative();},_prepDur:function(u){u=parseFloat(u);return u+"s";},_runNative:function(w){var C=this,x=C._node,E=b.stamp(x),v=x.style,A=getComputedStyle(x),I=d._nodeAttrs[E],y="",J=A[d._toCamel(j)],H=j+": ",B=p+": ",G=a+": ",D=n+": ",z,F,u;if(J!=="all"){H+=J+",";B+=A[d._toCamel(p)]+",";G+=A[d._toCamel(a)]+",";D+=A[d._toCamel(n)]+",";}for(u in I){z=d._toHyphen(u);F=I[u];if((F=I[u])&&F.transition===C){if(u in x.style){B+=C._prepDur(F.duration)+",";D+=C._prepDur(F.delay)+",";G+=(F.easing)+",";H+=z+",";y+=z+": "+F.value+"; ";}else{this.removeProperty(u);}}}H=H.replace(/,$/,";");B=B.replace(/,$/,";");G=G.replace(/,$/,";");D=D.replace(/,$/,";");if(!d._hasEnd[E]){x.addEventListener(c,C._onNativeEnd,"");d._hasEnd[E]=true;}v.cssText+=H+B+G+D+y;},_end:function(u){var y=this,w=y._node,A=y._callback,v=y._config,x={type:"transition:end",config:v,elapsedTime:u},z=b.one(w);y._running=false;y._callback=null;if(w){if(v.on&&v.on.end){setTimeout(function(){v.on.end.call(z,x);if(A){A.call(z,x);}},1);}else{if(A){setTimeout(function(){A.call(z,x);},1);}}}},_endNative:function(u){var v=this._node,w=v.ownerDocument.defaultView.getComputedStyle(v,"")[d._toCamel(j)];if(typeof w==="string"){w=w.replace(new RegExp("(?:^|,\\s)"+u+",?"),",");w=w.replace(/^,|,$/,"");v.style[k]=w;}},_onNativeEnd:function(B){var x=this,A=b.stamp(x),u=B,v=d._toCamel(u.propertyName),E=u.elapsedTime,D=d._nodeAttrs[A],C=D[v],y=(C)?C.transition:null,z,w;if(y){y.removeProperty(v);y._endNative(v);w=y._config[v];z={type:"propertyEnd",propertyName:v,elapsedTime:E,config:w};if(w&&w.on&&w.on.end){w.on.end.call(b.one(x),z);}if(y._count<=0){y._end(E);}}},destroy:function(){var v=this,u=v._node;if(u){u.removeEventListener(c,v._onNativeEnd,false);v._node=null;}}};b.Transition=d;b.TransitionNative=d;b.Node.prototype.transition=function(w,v,A){var u=d._nodeAttrs[b.stamp(this._node)],y=(u)?u.transition||null:null,x,z;if(typeof w==="string"){if(typeof v==="function"){A=v;v=null;}x=d.fx[w];if(v&&typeof v!=="boolean"){v=b.clone(v);for(z in x){if(x.hasOwnProperty(z)){if(!(z in v)){v[z]=x[z];}}}}else{v=x;}}else{A=v;v=w;}if(y&&!y._running){y.init(this,v);}else{y=new d(this._node,v);}y.run(A);return this;};b.Node.prototype.show=function(v,u,w){this._show();if(v&&b.Transition){if(typeof v!=="string"&&!v.push){if(typeof u==="function"){w=u;u=v;}v=d.SHOW_TRANSITION;}this.transition(v,u,w);}return this;};var o=function(v,u,w){return function(){if(u){u.call(v);}if(w){w.apply(v._node,arguments);}};};b.Node.prototype.hide=function(v,u,w){if(v&&b.Transition){if(typeof u==="function"){w=u;u=null;}w=o(this,this._hide,w);if(typeof v!=="string"&&!v.push){if(typeof u==="function"){w=u;u=v;}v=d.HIDE_TRANSITION;}this.transition(v,u,w);}else{this._hide();}return this;};b.NodeList.prototype.transition=function(v,y){var u=this._nodes,w=0,x;while((x=u[w++])){b.one(x).transition(v,y);}return this;};b.Node.prototype.toggleView=function(v,u,w){this._toggles=this._toggles||[];w=arguments[arguments.length-1];if(typeof v=="boolean"){u=v;v=null;}v=v||b.Transition.DEFAULT_TOGGLE;if(typeof u=="undefined"&&v in this._toggles){u=!this._toggles[v];}u=(u)?1:0;if(u){this._show();}else{w=o(this,this._hide,w);}this._toggles[v]=u;
this.transition(b.Transition.toggles[v][u],w);return this;};b.NodeList.prototype.toggleView=function(w,u,z){var v=this._nodes,x=0,y;while((y=v[x++])){b.one(y).toggleView(w,u,z);}return this;};b.mix(d.fx,{fadeOut:{opacity:0,duration:0.5,easing:"ease-out"},fadeIn:{opacity:1,duration:0.5,easing:"ease-in"},sizeOut:{height:0,width:0,duration:0.75,easing:"ease-out"},sizeIn:{height:function(u){return u.get("scrollHeight")+"px";},width:function(u){return u.get("scrollWidth")+"px";},duration:0.5,easing:"ease-in",on:{start:function(){var u=this.getStyle("overflow");if(u!=="hidden"){this.setStyle("overflow","hidden");this._transitionOverflow=u;}},end:function(){if(this._transitionOverflow){this.setStyle("overflow",this._transitionOverflow);delete this._transitionOverflow;}}}}});b.mix(d.toggles,{size:["sizeOut","sizeIn"],fade:["fadeOut","fadeIn"]});d.DEFAULT_TOGGLE="fade";},"3.4.0",{requires:["node-style"]});AUI.add("aui-toggler-delegate",function(t){var e=t.Lang,o=e.isBoolean,p=e.isObject,r=e.isString,C=t.Array,b=t.config.doc,g=t.Toggler,y="-",w=".",F="",n=" ",q="animated",f="click",s="closeAllOnExpand",u="container",j="content",v="cubic-bezier",l="expanded",a="firstChild",x="header",d="keydown",m="linear",i="toggler",c="toggler:animatingChange",B="toggler-delegate",E="transition",h="wrapper",D=t.getClassName,z=D(i,j,h);var k=t.Component.create({NAME:B,ATTRS:{animated:{validator:o,value:false,writeOnce:true},closeAllOnExpand:{validator:o,value:false},container:{setter:t.one,value:b},content:{validator:r},expanded:{validator:o,value:true},header:{validator:r},transition:{validator:p,value:{duration:0.4,easing:v}}},EXTENDS:t.Base,prototype:{items:null,initializer:function(){var A=this;A.bindUI();A.renderUI();},renderUI:function(){var A=this;if(A.get(s)){A.items=[];A.get(u).all(A.get(x)).each(function(G){A.items.push(A._create(G));});}},bindUI:function(){var A=this;var G=A.get(u);var H=A.get(x);A.on(c,t.bind(A._onAnimatingChange,A));G.delegate([f,d],t.bind(A.headerEventHandler,A),H);},findContentNode:function(J){var G=this;var H=G.get(j);var A=J.next(H)||J.one(H);if(!A){var I=J.next(w+z);if(I){A=I.get(a);}}return A;},headerEventHandler:function(G){var A=this;if(A.animating){return false;}var I=G.currentTarget;var H=I.getData(i)||A._create(I);if(g.headerEventHandler(G,H)&&A.get(s)){C.each(A.items,function(K,J,L){if(K!==H&&K.get(l)){K.collapse();}});}},_create:function(H){var A=this;var G=new g({animated:A.get(q),bindDOMEvents:false,bubbleTargets:[A],content:A.findContentNode(H),expanded:A.get(l),header:H,transition:A.get(E)});return G;},_onAnimatingChange:function(G){var A=this;A.animating=G.newVal;}}});t.TogglerDelegate=k;},"1.5.0",{requires:["aui-toggler-base"],skinnable:false});AUI.add("aui-toggler-base",function(p){var ad=p.Lang,K=ad.isBoolean,Q=ad.isObject,u=ad.isUndefined,m=ad.toInt,C="-",x=".",O="",G="px",a=" ",H="animated",T="animating",D="bindDOMEvents",U="click",q="collapsed",R="content",V="cubic-bezier",F="down",b="enter",j="esc",c="expanded",k="expandedChange",i="getBoundingClientRect",S="gutter",M="header",W="helper",ac="keydown",y="left",h="linear",n="marginTop",l="minus",r="num_minus",z="num_plus",o="parentNode",w="plus",X="right",a="space",B="toggler",Z="transition",g="transitionEnd",e="transitionStart",v="up",aa="wrapper",f=p.getClassName,t=f(B,R),ab=f(B,R,q),N=f(B,R,c),s=f(B,R,aa),d=f(B,M),J=f(B,M,q),I=f(B,M,c),L={"false":ab,"true":N},E={"false":J,"true":I},P='<div class="'+s+'"></div>';var Y=p.Component.create({NAME:B,ATTRS:{animated:{validator:K,value:false,writeOnce:true},animating:{validator:K,value:false},bindDOMEvents:{validator:K,value:true,writeOnce:true},content:{setter:p.one},expanded:{validator:K,value:true},header:{setter:p.one},transition:{validator:Q,value:{duration:0.4,easing:V}}},EXTENDS:p.Base,headerEventHandler:function(ae,A){if(ae.type===U||ae.isKey(b)||ae.isKey(a)){ae.preventDefault();return A.toggle();}else{if(ae.isKey(F)||ae.isKey(X)||ae.isKey(z)){ae.preventDefault();return A.expand();}else{if(ae.isKey(v)||ae.isKey(y)||ae.isKey(j)||ae.isKey(r)){ae.preventDefault();return A.collapse();}}}},prototype:{initializer:function(){var A=this;A.bindUI();A.syncUI();A._uiSetExpanded(A.get(c));},bindUI:function(){var A=this;var ae=A.get(M);ae.setData(B,A);A.on(k,p.bind(A._onExpandedChange,A));if(A.get(D)){ae.on([U,ac],p.rbind(Y.headerEventHandler,null,A));}},syncUI:function(){var A=this;A.get(R).addClass(t);A.get(M).addClass(d);},animate:function(ae,af){var A=this;A._uiSetExpanded(true);var ag=p.merge(ae,A.get(Z));A.get(R).transition(ag,p.bind(af,A));},collapse:function(){var A=this;return A.toggle(false);},expand:function(){var A=this;return A.toggle(true);},getContentHeight:function(){var ae=this;var ah=ae.get(R);var ag=ae.get(c),A;if(!ag){ae._uiSetExpanded(true);}if(ah.hasMethod(i)){var af=ah.invoke(i);if(af){A=af.bottom-af.top;}}else{A=ah.get(OFFSET_HEIGHT);}if(!ag){ae._uiSetExpanded(false);}return A;},toggle:function(af){var ae=this;if(u(af)){af=!ae.get(c);}if(ae.get(H)){if(ae.get(T)){return af;}var ag=ae.get(R);var A=ae.getContentHeight();var ah=m(ag.getStyle(n));if(!ae.wrapped){ag.wrap(P);if(af){ah=-(A+ah);ag.setStyle(n,ah);}ae.wrapped=true;}ae.set(T,true);ae.animate({marginTop:-(A+ah)+G},function(){ae.set(T,false);ae.set(c,af);});}else{ae.set(c,af);}return af;},_onExpandedChange:function(ae){var A=this;A._uiSetExpanded(ae.newVal);},_uiSetExpanded:function(ae){var A=this;A.get(R).replaceClass(L[!ae],L[ae]);A.get(M).replaceClass(E[!ae],E[ae]);}}});p.Toggler=Y;},"1.5.0",{skinnable:true,requires:["aui-base","transition"]});